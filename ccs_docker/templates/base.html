{% load static i18n compress %}

<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
{{ availableTags|json_script:"availableTags" }}
{{ ps_list|json_script:"ps_list" }}
{% load compress %}

<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>
      {% block title %}
        Crime Criminal Search
      {% endblock title %}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
          content="For authorized police-officers, Crime Criminal Search is a web-accessible database of crimes and criminals. It uses Graph Theory to get deep insights into connections between criminals. Citizens can use it to search for involvement of any vehicle in crimes in West Bengal, help the police by answering unsolved clues, see heat-map of crimes and locate any police station in West Bengal on the map." />
    <meta name="author" content="Sanjay Singh" />
    <link rel="icon" href="{% static 'images/favicons/favicon.ico' %}" />
    {% block css %}
      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous" />
      <!-- Your stuff: Third-party CSS libraries go here -->
      <link rel="stylesheet"
            href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" />
      <!-- Font-awesome -->
      <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
      <!-- This file stores project-specific CSS -->
      <link href="{% static 'css/project.css' %}" rel="stylesheet" />
      <!-- Mapbox -->
      <link href='https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css'
            rel='stylesheet' />
      <link rel="stylesheet"
            href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.css"
            type="text/css" />
      <!-- Project specific CSS -->
      <link href="{% static 'css/project.css' %}" rel="stylesheet" />
      <link href="{% static 'css/crimes.css' %}" rel="stylesheet" />
      <link href="{% static 'css/pages.css' %}" rel="stylesheet" />
      <link href="{% static 'css/scaffolds.css' %}" rel="stylesheet" />
      <link href="{% static 'css/calendar.css' %}" rel="stylesheet" />
      <link href="{% static 'fontawesome_free/css/fontawesome.css' %}"
            rel="stylesheet"
            type="text/css" />
      {% compress css %}
        <link href="{% static 'css/project.css' %}" rel="stylesheet" />
      {% endcompress %}
    {% endblock css %}
    <!-- JavaScript
    ================================================== -->
    {% block javascript %}
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-68140050-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
          dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-68140050-1');
      </script>
      <!-- Bootstrap JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
              integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
              crossorigin="anonymous"></script>
      <!-- Your stuff: Third-party javascript libraries go here -->
      <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      <!--- Mapbox-->
      <script src='https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js'></script>
      <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.js"></script>
      <!-- place project specific Javascript in this file -->
      {% compress js %}
        <script defer src="{% static 'js/project.js' %}"></script>
        <script defer src="{% static 'js/formset.js' %}"></script>
        <script defer src="{% static 'js/trial_monitoring.js' %}"></script>
      {% endcompress %}
    {% endblock javascript %}
  </head>
  <body>
    <header class="mb-1">
      <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="container-fluid">
          <button class="navbar-toggler navbar-toggler-right"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#navbarSupportedContent"
                  aria-controls="navbarSupportedContent"
                  aria-expanded="false"
                  aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <a class="navbar-brand" href="{% url 'home' %}">Crime Criminal Search</a>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="{% url 'home' %}">Home <span class="sr-only">(current)</span></a>
              </li>
              {% if request.user.is_authenticated %}
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle"
                     href="#"
                     id="navbarDropdown"
                     role="button"
                     data-bs-toggle="dropdown"
                     aria-expanded="false">Authentication</a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item"
                       href="{% url 'users:detail' request.user.username %}">{% trans "My Profile" %}</a>
                    <a class="dropdown-item" href="{% url 'users:district_admins' %}">Authorisation Help</a>
                    <a class="dropdown-item" href="{% url 'account_logout' %}">{% trans "Sign Out" %}</a>
                  </div>
                </li>
              {% else %}
                <li class="nav-item">
                  {# URL provided by django-allauth/account/urls.py #}
                  <a id="sign-up-link" class="nav-link" href="{% url 'account_signup' %}">{% trans "Sign Up" %}</a>
                </li>
                <li class="nav-item">
                  {# URL provided by django-allauth/account/urls.py #}
                  <a id="log-in-link" class="nav-link" href="{% url 'account_login' %}">{% trans "Sign In" %}</a>
                </li>
              {% endif %}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle"
                   href="#"
                   id="navbarDropdown"
                   role="button"
                   data-bs-toggle="dropdown"
                   aria-expanded="false">Searches</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="{% url 'searches:crime_search' %}">Crime Search</a>
                  <a class="dropdown-item" href="{% url 'searches:criminal_search' %}">Criminal Search</a>
                  <a class="dropdown-item" href="{% url 'backend:vehicle_search' %}">Vehicle Search</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle"
                   href="#"
                   id="navbarDropdown"
                   role="button"
                   data-bs-toggle="dropdown"
                   aria-expanded="false">Add</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="{% url 'backend:crime-create' %}">Crime</a>
                  <a class="dropdown-item" href="{% url 'backend:criminal-create' %}">Criminal</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle"
                   href="#"
                   id="navbarDropdown"
                   role="button"
                   data-bs-toggle="dropdown"
                   aria-expanded="false">Connections</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item"
                     href="{% url 'graphs:connection_of_criminals' %}">Connection 2 Criminals</a>
                  <a class="dropdown-item"
                     href="{% url 'graphs:criminal_associates_in_ps' %}">Connection Criminal-PS</a>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'backend:daily_report' %}">Daily Report</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'backend:start' %}">Court Dates</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle"
                   href="#"
                   id="navbarDropdown"
                   role="button"
                   data-bs-toggle="dropdown"
                   aria-expanded="false">Charts</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="{% url 'charts:crime_search' %}">Crime Chart</a>
                  <a class="dropdown-item" href="{% url 'charts:trans_ps_activity' %}">Trans-PS Crime</a>
                  <a class="dropdown-item"
                     href="{% url 'charts:trans_ps_activity_in_ps' %}">Target of trans-Ps Crime</a>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link"
                   href="{% url 'maps:police_stations' %}"
                   target="_blank">Police Stations</a>
              </li>
              {% if request.user.category in admin_users %}
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle"
                     href="#"
                     id="navbarDropdown"
                     role="button"
                     data-bs-toggle="dropdown"
                     aria-expanded="false">Admin</a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item"
                       href="{% url 'utilities:duplicate_criminals' %}">Duplicate Criminals</a>
                    <a class="dropdown-item"
                       href="{% url 'utilities:duplicate_criminals_from_list' %}">Duplicate Criminals From List</a>
                    <a class="dropdown-item" href="{% url 'utilities:tag_management' %}">Manage Tags</a>
                    <a class="dropdown-item" href="{% url 'utilities:reset_ps_cache' %}">Reset PS Cache</a>
                    <a class="dropdown-item" href="{% url 'utilities:reset_tag_cache' %}">Reset Tag Cache</a>
                  </div>
                </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main class="container">
      {% if messages %}
        {% for message in messages %}
          <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
        {% endfor %}
      {% endif %}
      {% block content %}
        <p>Use this document as a way to quick start any new project.</p>
      {% endblock content %}
    </main>
    {% block modal %}
    {% endblock modal %}
    {% block inline_javascript %}
      {# Script tags with only code, no src (defer by default) #}
    {% endblock inline_javascript %}
  </body>
</html>
